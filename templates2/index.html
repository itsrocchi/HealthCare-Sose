<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Client</title>
    <style>
        .response {
            white-space: pre-wrap;
            border: 1px solid #ccc;
            padding: 10px;
            margin-top: 10px;
            background-color: #f9f9f9;
        }
    </style>
</head>
<body>
    <h1>API Client</h1>

    <!-- Form for SOAP cancelAppointment -->
    <h3>Cancel Appointment</h3>
    <input type="text" id="cancel-appointment-arg0" placeholder="Enter Appointment ID">
    <button onclick="soapCancelAppointment()">Cancel Appointment</button>
    <div id="soap-cancel-appointment-response" class="response"></div>

    <!-- Form for SOAP getAllAppointments -->
    <h3>Get All Appointments</h3>
    <button onclick="sendRequest('soap/getAllAppointments','POST')">Get All Appointments</button>
    <div id="soap-get-all-appointments-response" class="response"></div>

    <!-- Form for SOAP getAppointmentById -->
    <h3>Get Appointment By ID</h3>
    <input type="text" id="get-appointment-by-id-arg0" placeholder="Enter Appointment ID">
    <button onclick="soapGetAppointmentById()">Get Appointment</button>
    <div id="soap-get-appointment-by-id-response" class="response"></div>

    <!-- Form for SOAP getAppointmentsByDoctor -->
    <h3>Get Appointments By Doctor</h3>
    <input type="text" id="get-appointments-by-doctor-arg0" placeholder="Enter Doctor ID">
    <button onclick="soapGetAppointmentsByDoctor()">Get Appointments</button>
    <div id="soap-get-appointments-by-doctor-response" class="response"></div>

    <!-- Form for SOAP getAppointmentsByPatient -->
    <h3>Get Appointments By Patient</h3>
    <input type="text" id="get-appointments-by-patient-arg0" placeholder="Enter Patient ID">
    <button onclick="soapGetAppointmentsByPatient()">Get Appointments</button>
    <div id="soap-get-appointments-by-patient-response" class="response"></div>

    <!-- Form for SOAP scheduleAppointment -->
    <h3>Schedule Appointment</h3>
    <input type="text" id="schedule-appointment-arg0" placeholder="Enter Appointment ID"><br>
    <input type="text" id="schedule-appointment-arg1" placeholder="Enter Patient ID"><br>
    <input type="text" id="schedule-appointment-arg2" placeholder="Enter Doctor ID"><br>
    <input type="text" id="schedule-appointment-arg3" placeholder="Enter Date"><br>
    <input type="text" id="schedule-appointment-arg4" placeholder="Enter Reason"><br>
    <input type="text" id="schedule-appointment-arg5" placeholder="Enter Status"><br>
    <button onclick="soapScheduleAppointment()">Schedule Appointment</button>
    <div id="soap-schedule-appointment-response" class="response"></div>

    <!-- Form for SOAP updateAppointment -->
    <h3>Update Appointment</h3>
    <input type="text" id="update-appointment-arg0" placeholder="Enter Appointment ID"><br>
    <input type="text" id="update-appointment-arg1" placeholder="Enter Updated Data"><br>
    <button onclick="soapUpdateAppointment()">Update Appointment</button>
    <div id="soap-update-appointment-response" class="response"></div>


    <!-- Form for GET /prs -->
    <h3>Get PRS Data</h3>
    <button onclick="getPrsData()">Get PRS Data</button>
    <div id="get-prs-response" class="response"></div>

    <!-- Form for GET /prs/{CF} -->
    <h3>Get PRS Data by CF</h3>
    <input type="text" id="prs-get-cf" placeholder="Enter CF">
    <button onclick="getPrsById()">Get PRS Data</button>
    <pre id="get-prs-response2" class="response"></pre>

    <!-- Form for POST /prs -->
    <h3>Post PRS Data</h3>
    <textarea id="prs-post-body" placeholder='{"cf": "ABC126", "name": "John", "surname": "Doe", "gender": "MALE", "birthDate": "1990-01-01", "address": "123 Main St", "email": "john.doe@example.com"}' rows="5" cols="60"></textarea><br>
    <button onclick="postPrsData()">Post PRS Data</button>
    <div id="post-prs-response" class="response"></div>

    <!-- Form for PUT /prs/{CF} -->
    <h3>Put PRS Data</h3>
    <input type="text" id="prs-put-cf" placeholder="Enter CF"><br>
    <textarea id="prs-put-body" placeholder='{"name": "John", "surname": "Doe", "gender": "MALE", "birthDate": "1990-01-01", "address": "123 Main St", "email": "john.doe@example.com"}' rows="5" cols="60"></textarea><br>
    <button onclick="putPrsData()">Put PRS Data</button>
    <div id="put-prs-response" class="response"></div>

    <!-- Form for DELETE /prs/{CF} -->
    <h3>Delete PRS Data</h3>
    <input type="text" id="prs-delete-cf" placeholder="Enter CF">
    <button onclick="deletePrsData()">Delete PRS Data</button>
    <div id="delete-prs-response" class="response"></div>

    <!-- Form for GET /drs -->
    <h3>Get DRS Data</h3>
    <button onclick="getDrsData()">Get DRS Data</button>
    <div id="get-drs-response" class="response"></div>

    <!-- Form for GET /drs/{id} -->
    <h3>Get DRS Data by ID</h3>
    <input type="text" id="drs-get-cf" placeholder="Enter CF">
    <button onclick="getDrsById()">Get DRS Data</button>
    <pre id="get-drs-response2" class="response"></pre>

    <!-- Form for POST /drs -->
    <h3>Post DRS Data</h3>
    <textarea id="drs-post-body" placeholder='{"id": "D99", "name": "Eric", "surname": "Mheinen", "specialization": "Psychiatry"}' rows="5" cols="60"></textarea><br>
    <button onclick="postDrsData()">Post DRS Data</button>
    <div id="post-drs-response" class="response"></div>

    <!-- Form for PUT /drs/{ID} -->
    <h3>Put DRS Data</h3>
    <input type="text" id="drs-put-id" placeholder="Enter ID"><br>
    <textarea id="drs-put-body" placeholder='{"name": "Eric", "surname": "Mheinen", "specialization": "Psychiatry"}' rows="5" cols="60"></textarea><br>
    <button onclick="putDrsData()">Put DRS Data</button>
    <div id="put-drs-response" class="response"></div>

    <!-- Form for DELETE /drs/{ID} -->
    <h3>Delete DRS Data</h3>
    <input type="text" id="drs-delete-id" placeholder="Enter ID">
    <button onclick="deleteDrsData()">Delete DRS Data</button>
    <div id="delete-drs-response" class="response"></div>

    <!-- Form for GET /hms/statistical/... -->
    <h3>Get HMS Statistical Data</h3>
    <button onclick="getHmsAverageAge()">Get Average Age</button>
    <button onclick="getHmsTotalPatient()">Get Total Patients</button>
    <button onclick="getHmsGenderPercentage()">Get Gender Percentage</button>
    <button onclick="getHmsNoDiseasePercentage()">Get No Disease Percentage</button>
    <div id="hms-statistical-response" class="response"></div>

    <!-- Form for GET /hms/aggregateData/{CF} -->
    <h3>Get Aggregate Data</h3>
    <input type="text" id="cf-input" placeholder="Enter CF">
    <button onclick="getAggregateData()">Get Aggregate Data</button>
    <div id="get-aggregate-data-response" class="response"></div>

    <!-- Form for POST /hms/medicalRecord -->
    <h3>Post Medical Record</h3>
    <input type="text" id="medical-record-cf" placeholder="Enter CF"><br>
    <textarea id="medical-record-body" placeholder='{"cf": "ABC129", "pastDiseases": ["Hypertension", "Diabetes"], "allergies": ["Peanuts", "Dust"], "vaccinations": ["COVID-19", "Flu"], "medications": ["Aspirin", "Metformin"], "notes": "Patient needs regular check-ups."}' rows="5" cols="60"></textarea><br>
    <button onclick="postMedicalRecord()">Post Medical Record</button>
    <div id="post-medical-record-response" class="response"></div>

    <script>
        async function getPrsById() {
            const cf = document.getElementById('prs-get-cf').value.trim();
            if (!cf) {
                document.getElementById('get-prs-response2').textContent = 'Error: CF is required';
                return;
            }

            try {
                const response = await fetch(`/prs/${encodeURIComponent(cf)}`);
                if (!response.ok) {
                    const errorText = await response.text();
                    throw new Error(`HTTP error! status: ${response.status}, message: ${errorText}`);
                }
                const data = await response.json();
                document.getElementById('get-prs-response2').textContent = JSON.stringify(data, null, 2);
            } catch (error) {
                document.getElementById('get-prs-response2').textContent = `Error: ${error.message}`;
            }
        }

        async function getDrsById() {
            const cf = document.getElementById('drs-get-cf').value.trim();
            if (!cf) {
                document.getElementById('get-drs-response2').textContent = 'Error: CF is required';
                return;
            }

            try {
                const response = await fetch(`/drs/${encodeURIComponent(cf)}`);
                if (!response.ok) {
                    const errorText = await response.text();
                    throw new Error(`HTTP error! status: ${response.status}, message: ${errorText}`);
                }
                const data = await response.json();
                document.getElementById('get-drs-response2').textContent = JSON.stringify(data, null, 2);
            } catch (error) {
                document.getElementById('get-drs-response2').textContent = `Error: ${error.message}`;
            }
        }    


        async function getAggregateData() {
            const cf = document.getElementById('cf-input').value.trim();
            if (!cf) {
                document.getElementById('get-aggregate-data-response').textContent = 'Error: CF is required';
                return;
            }

            try {
                const response = await fetch(`/hms/aggregatedData/${encodeURIComponent(cf)}`);
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const data = await response.json();
                document.getElementById('get-aggregate-data-response').textContent = JSON.stringify(data, null, 2);
            } catch (error) {
                document.getElementById('get-aggregate-data-response').textContent = `Error: ${error.message}`;
            }
        }

        async function getPrsData() {
            try {
                const response = await fetch('/prs');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const data = await response.json();
                document.getElementById('get-prs-response').textContent = JSON.stringify(data, null, 2);
            } catch (error) {
                document.getElementById('get-prs-response').textContent = `Error: ${error.message}`;
            }
        }

        async function postPrsData() {
            const body = document.getElementById('prs-post-body').value.trim();
            try {
                const response = await fetch('/prs', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: body
                });
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const data = await response.json();
                document.getElementById('post-prs-response').textContent = JSON.stringify(data, null, 2);
            } catch (error) {
                document.getElementById('post-prs-response').textContent = `Error: ${error.message}`;
            }
        }

        async function putPrsData() {
            const cf = document.getElementById('prs-put-cf').value.trim();
            const body = document.getElementById('prs-put-body').value.trim();
            if (!cf) {
                document.getElementById('put-prs-response').textContent = 'Error: CF is required';
                return;
            }

            try {
                const response = await fetch(`/prs/${encodeURIComponent(cf)}`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: body
                });
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const data = await response.json();
                document.getElementById('put-prs-response').textContent = JSON.stringify(data, null, 2);
            } catch (error) {
                document.getElementById('put-prs-response').textContent = `Error: ${error.message}`;
            }
        }

        async function deletePrsData() {
            const cf = document.getElementById('prs-delete-cf').value.trim();
            if (!cf) {
                document.getElementById('delete-prs-response').textContent = 'Error: CF is required';
                return;
            }

            try {
                const response = await fetch(`/prs/${encodeURIComponent(cf)}`, {
                    method: 'DELETE'
                });
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }if(response.status_code == 500) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }else{
                    document.getElementById('delete-prs-response').textContent = 'Delete successful';
                }
            } catch (error) {
                document.getElementById('delete-prs-response').textContent = `Error: ${error.message}`;
            }
        }

        async function getDrsData() {
            try {
                const response = await fetch('/drs');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const data = await response.json();
                document.getElementById('get-drs-response').textContent = JSON.stringify(data, null, 2);
            } catch (error) {
                document.getElementById('get-drs-response').textContent = `Error: ${error.message}`;
            }
        }

        async function postDrsData() {
            const body = document.getElementById('drs-post-body').value.trim();
            try {
                const response = await fetch('/drs', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: body
                });
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const data = await response.json();
                document.getElementById('post-drs-response').textContent = JSON.stringify(data, null, 2);
            } catch (error) {
                document.getElementById('post-drs-response').textContent = `Error: ${error.message}`;
            }
        }

        async function putDrsData() {
            const id = document.getElementById('drs-put-id').value.trim();
            const body = document.getElementById('drs-put-body').value.trim();
            if (!id) {
                document.getElementById('put-drs-response').textContent = 'Error: ID is required';
                return;
            }

            try {
                const response = await fetch(`/drs/${encodeURIComponent(id)}`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: body
                });
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const data = await response.json();
                document.getElementById('put-drs-response').textContent = JSON.stringify(data, null, 2);
            } catch (error) {
                document.getElementById('put-drs-response').textContent = `Error: ${error.message}`;
            }
        }

        async function deleteDrsData() {
            const id = document.getElementById('drs-delete-id').value.trim();
            if (!id) {
                document.getElementById('delete-drs-response').textContent = 'Error: ID is required';
                return;
            }

            try {
                const response = await fetch(`/drs/${encodeURIComponent(id)}`, {
                    method: 'DELETE'
                });
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }if(response.status_code == 500) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }else{
                    document.getElementById('delete-drs-response').textContent = 'Delete successful';
                }
            } catch (error) {
                document.getElementById('delete-drs-response').textContent = `Error: ${error.message}`;
            }
        }

        async function getHmsAverageAge() {
            try {
                const response = await fetch('/hms/statistical/average-age');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const data = await response.json();
                document.getElementById('hms-statistical-response').textContent = JSON.stringify(data, null, 2);
            } catch (error) {
                document.getElementById('hms-statistical-response').textContent = `Error: ${error.message}`;
            }
        }

        async function getHmsTotalPatient() {
            try {
                const response = await fetch('/hms/statistical/total-patients');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const data = await response.json();
                document.getElementById('hms-statistical-response').textContent = JSON.stringify(data, null, 2);
            } catch (error) {
                document.getElementById('hms-statistical-response').textContent = `Error: ${error.message}`;
            }
        }

        async function getHmsGenderPercentage() {
            try {
                const response = await fetch('/hms/statistical/gender-percentage');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const data = await response.json();
                document.getElementById('hms-statistical-response').textContent = JSON.stringify(data, null, 2);
            } catch (error) {
                document.getElementById('hms-statistical-response').textContent = `Error: ${error.message}`;
            }
        }

        async function getHmsNoDiseasePercentage() {
            try {
                const response = await fetch('/hms/statistical/nodisease-percentage');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const data = await response.json();
                document.getElementById('hms-statistical-response').textContent = JSON.stringify(data, null, 2);
            } catch (error) {
                document.getElementById('hms-statistical-response').textContent = `Error: ${error.message}`;
            }
        }

        async function postMedicalRecord() {
            const cf = document.getElementById('medical-record-cf').value.trim();
            const body = document.getElementById('medical-record-body').value.trim();

            try {
                const response = await fetch(`/hms/medicalRecord`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: body
                });
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const data = await response.json();
                document.getElementById('post-medical-record-response').textContent = JSON.stringify(data, null, 2);
            } catch (error) {
                document.getElementById('post-medical-record-response').textContent = `Error: ${error.message}`;
            }
        }

        async function soapCancelAppointment() {
            const arg0 = document.getElementById('cancel-appointment-arg0').value.trim();
            const data = { arg0 };

            try {
                const response = await fetch(`/soap/cancelAppointment`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });
                const result = await response.json();
                document.getElementById('soap-cancel-appointment-response').textContent = JSON.stringify(result, null, 2);
            } catch (error) {
                document.getElementById('soap-cancel-appointment-response').textContent = `Error: ${error.message}`;
            }
        }

        function sendRequest(endpoint, method) {
            let url = `/${endpoint}`;
            let options = {
                method: method,
                headers: {
                    'Content-Type': 'application/json'
                }
            };
            if (method === 'POST') {
                options.body = JSON.stringify({
                    "cf": "ABC126",
                    "name": "John",
                    "surname": "Doe",
                    "gender": "MALE",
                    "birthDate": "1990-01-01",
                    "address": "123 Main St",
                    "email": "john.doe@example.com"
                });
            }
            fetch(url, options)
                .then(response => response.json())
                .then(data => {
                    document.getElementById('soap-get-all-appointments-response').innerText = JSON.stringify(data, null, 2);
                })
                .catch(error => {
                    document.getElementById('soap-get-all-appointments-response').innerText = 'Error: ' + error;
                });
        }

        async function soapGetAppointmentById() {
            const arg0 = document.getElementById('get-appointment-by-id-arg0').value.trim();
            const data = { arg0 };

            try {
                const response = await fetch(`/soap/getAppointmentById`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });
                const result = await response.json();
                document.getElementById('soap-get-appointment-by-id-response').textContent = JSON.stringify(result, null, 2);
            } catch (error) {
                document.getElementById('soap-get-appointment-by-id-response').textContent = `Error: ${error.message}`;
            }
        }

        async function soapGetAppointmentsByDoctor() {
            const arg0 = document.getElementById('get-appointments-by-doctor-arg0').value.trim();
            const data = { arg0 };

            try {
                const response = await fetch(`/soap/getAppointmentsByDoctor`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });
                const result = await response.json();
                document.getElementById('soap-get-appointments-by-doctor-response').textContent = JSON.stringify(result, null, 2);
            } catch (error) {
                document.getElementById('soap-get-appointments-by-doctor-response').textContent = `Error: ${error.message}`;
            }
        }

        async function soapGetAppointmentsByPatient() {
            const arg0 = document.getElementById('get-appointments-by-patient-arg0').value.trim();
            const data = { arg0 };

            try {
                const response = await fetch(`/soap/getAppointmentsByPatient`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });
                const result = await response.json();
                document.getElementById('soap-get-appointments-by-patient-response').textContent = JSON.stringify(result, null, 2);
            } catch (error) {
                document.getElementById('soap-get-appointments-by-patient-response').textContent = `Error: ${error.message}`;
            }
        }

        async function soapScheduleAppointment() {
            const arg0 = document.getElementById('schedule-appointment-arg0').value.trim();
            const arg1 = document.getElementById('schedule-appointment-arg1').value.trim();
            const arg2 = document.getElementById('schedule-appointment-arg2').value.trim();
            const arg3 = document.getElementById('schedule-appointment-arg3').value.trim();
            const arg4 = document.getElementById('schedule-appointment-arg4').value.trim();
            const arg5 = document.getElementById('schedule-appointment-arg5').value.trim();
            const data = { arg0, arg1, arg2, arg3, arg4, arg5 };

            try {
                const response = await fetch(`/soap/scheduleAppointment`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });
                const result = await response.json();
                document.getElementById('soap-schedule-appointment-response').textContent = JSON.stringify(result, null, 2);
            } catch (error) {
                document.getElementById('soap-schedule-appointment-response').textContent = `Error: ${error.message}`;
            }
        }

        async function soapUpdateAppointment() {
            const arg0 = document.getElementById('update-appointment-arg0').value.trim();
            const arg1 = document.getElementById('update-appointment-arg1').value.trim();
            const data = { arg0, arg1 };

            try {
                const response = await fetch(`/soap/updateAppointment`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });
                const result = await response.json();
                document.getElementById('soap-update-appointment-response').textContent = JSON.stringify(result, null, 2);
            } catch (error) {
                document.getElementById('soap-update-appointment-response').textContent = `Error: ${error.message}`;
            }
        }
    </script>
</body>
</html>
